@echo off
chcp 65001 >nul
color 0A
cls

REM ะะตัะตัะพะดะธะผ ะฒ ะบะพัะฝะตะฒัั ะดะธัะตะบัะพัะธั ะฟัะพะตะบัะฐ
cd /d "%~dp0.."

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ          ๐ PATTERN FINDER - ะะะะฃะกะ ะะะะะะะะะะฏ ๐          โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

REM ============================================================
REM ะจะะ 1: ะฃะฑะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั Node.js
REM ============================================================
echo [1/4] ๐ช ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั Node.js...
taskkill /F /IM node.exe >nul 2>&1
if %errorlevel% equ 0 (
    echo       โ ะัะพัะตััั Node.js ะพััะฐะฝะพะฒะปะตะฝั
) else (
    echo       โ๏ธ  Node.js ะฟัะพัะตััั ะฝะต ะฝะฐะนะดะตะฝั
)
timeout /t 1 /nobreak >nul
echo.

REM ============================================================
REM ะจะะ 2: ะัะธัะฐะตะผ ะบะตั npm
REM ============================================================
echo [2/4] ๐งน ะัะธัะฐะตะผ ะบะตั npm...
call npm cache clean --force >nul 2>&1
echo       โ ะะตั npm ะพัะธัะตะฝ
timeout /t 1 /nobreak >nul
echo.

REM ============================================================
REM ะจะะ 3: ะะฐะฟััะบะฐะตะผ ัะตัะฒะตั
REM ============================================================
echo [3/4] ๐ ะะฐะฟััะบะฐะตะผ Node.js ัะตัะฒะตั...
echo       ๐ ะกะตัะฒะตั ะฑัะดะตั ะดะพัััะฟะตะฝ ะฝะฐ http://localhost:3000
echo.
start cmd /k "color 0B && title Pattern Finder Server && npm run dev"
timeout /t 3 /nobreak >nul
echo       โ ะกะตัะฒะตั ะทะฐะฟััะตะฝ ะฒ ะฝะพะฒะพะผ ะพะบะฝะต
echo.

REM ============================================================
REM ะจะะ 4: ะัะบััะฒะฐะตะผ ะฑัะฐัะทะตั ะฒ ัะตะถะธะผะต ะธะฝะบะพะณะฝะธัะพ
REM ============================================================
echo [4/4] ๐ ะัะบััะฒะฐะตะผ ะฑัะฐัะทะตั ะฒ ัะตะถะธะผะต ะธะฝะบะพะณะฝะธัะพ...
timeout /t 2 /nobreak >nul

REM ะัะพะฑัะตะผ ะฝะฐะนัะธ Chrome
set CHROME_PATH=
if exist "C:\Program Files\Google\Chrome\Application\chrome.exe" (
    set CHROME_PATH=C:\Program Files\Google\Chrome\Application\chrome.exe
) else if exist "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" (
    set CHROME_PATH=C:\Program Files (x86)\Google\Chrome\Application\chrome.exe
) else if exist "%LOCALAPPDATA%\Google\Chrome\Application\chrome.exe" (
    set CHROME_PATH=%LOCALAPPDATA%\Google\Chrome\Application\chrome.exe
)

if defined CHROME_PATH (
    start "" "%CHROME_PATH%" --incognito --new-window "http://localhost:3000"
    echo       โ Chrome ะพัะบััั ะฒ ัะตะถะธะผะต ะธะฝะบะพะณะฝะธัะพ
) else (
    start http://localhost:3000
    echo       โ๏ธ  Chrome ะฝะต ะฝะฐะนะดะตะฝ, ะพัะบััั ะฑัะฐัะทะตั ะฟะพ ัะผะพะปัะฐะฝะธั
    echo       โน๏ธ  ะัะบัะพะนัะต ะฒัััะฝัั ะฒ ัะตะถะธะผะต ะธะฝะบะพะณะฝะธัะพ: Ctrl+Shift+N
)
echo.

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                    โ ะะะะฃะกะ ะะะะะะจะะ                       โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ะะะะะ:
echo    โข ะกะตัะฒะตั ัะฐะฑะพัะฐะตั ะฒ ะพัะดะตะปัะฝะพะผ ะพะบะฝะต
echo    โข ะะ ะทะฐะบััะฒะฐะนัะต ะพะบะฝะพ ัะตัะฒะตัะฐ
echo    โข ะะปั ะพััะฐะฝะพะฒะบะธ: ะทะฐะบัะพะนัะต ะพะบะฝะพ ัะตัะฒะตัะฐ ะธะปะธ ะฝะฐะถะผะธัะต Ctrl+C
echo.
echo ๐ ะ ะบะพะฝัะพะปะธ ะฑัะฐัะทะตัะฐ (F12) ะดะพะปะถะฝะพ ะฑััั:
echo    "๐ฅ BOUNDED WALK: ะขะธะฟ X - ะะะะะะขะะฏ ยฑ1.5%%"
echo.
echo ๐ ะัะต ะฟัะพะณะฝะพะทั ะฑัะดัั ะฒ ะดะธะฐะฟะฐะทะพะฝะต ยฑ1.5%% ะพั ััะฐััะพะฒะพะน ัะตะฝั
echo.

pause
